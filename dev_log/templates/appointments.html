{% extends 'base_template.html' %}
{% block content %}

<div class="container-fluid">

    <!-- Page Content -->

  <div class="card-body">
  <div class="table-responsive">
    <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
      <div class="card-header">
        <h1>Appointments from
          {{start_week}}
          to
          {{end_week}}
        </h1>
        <div class='flex-row'>

            <form method="post">


                  <div class="d-flex justify-content-between">


                    <form method="post">
                    <div class="form-group">

                        <select id="inputpatient" class="form-control" placeholder="patient" required="required" name="research" onchange="this.form.submit()" value="{{research}}" >
                          <option>Choose Patient</option>
                          {% for patient in patients %}
                          {% if patient.last_name + ' - ' + patient.first_name == research %}
                          <option selected>
                          {{research}}
                          </option>
                          {% else %}
                          <option>
                          {{patient.last_name}} - {{patient.first_name}}
                          </option>
                          {% endif %}
                          {% endfor %}
                        </select>
                    </div>
                    <div class="form-group">

                        <select id="inputcare" class="form-control" placeholder="care" required="required" name="care_research" onchange="this.form.submit()" value="{{care_research}}" >
                          <option>Choose Care</option>
                          {% for care in cares %}
                          {% if care.description == care_research %}
                          <option selected>
                          {{care_research}}
                          </option>
                          {% else %}
                          <option>
                          {{care.description}}
                          </option>
                          {% endif %}
                          {% endfor %}
                        </select>
                    </div>
                    <div class="form-group">
                      <input type="date" id="date" class="form-control" placeholder="date" required="required" name="date" onchange="this.form.submit()" value="{{time}}">
                    </div>
                    </form>

                  </div>


                </form>

        </div>
      </div>

      <thead>
        <tr>
          <th>Monday</th>
          <th>Tuesday</th>
          <th>Wednesday</th>
          <th>Thursday</th>
          <th>Friday</th>
          <th>Saturday</th>
          <th>Sunday</th>
        </tr>
      </thead>

      <tbody>
        <tr>
          {% if appointments[0][0] %}
          <td class="table-success"> {{appointments[0][0]}} </td>
          {% elif not availabilities[0][0] %}
            <td> </td>
          {% else %}

          <td> <div class="col-lg-8 col-lg-8">
            <a href="{{ url_for('appointments.add_appointment',day=1,week=week,year=year,halfday='Morning',research=research,care_research=care_research)}}" class="btn btn-secondary btn-sm active"
              role="button">New </a>
          </div></td>
          {% endif %}

          {% if appointments[1][0] %}
          <td class="table-success"> {{appointments[1][0]}} </td>
          {% elif not availabilities[1][0] %}
            <td> </td>
          {% else %}

          <td><div class="col-lg-8 col-lg-8">
            <a href="{{ url_for('appointments.add_appointment',day=2,week=week,year=year,halfday='Morning',research=research,care_research=care_research)}}" class="btn btn-secondary btn-sm active"
              role="button">New </a>
          </div> </td>
          {% endif %}

          {% if appointments[2][0] %}
          <td class="table-success"> {{appointments[2][0]}} </td>
          {% elif not availabilities[2][0] %}
            <td> </td>
          {% else %}

          <td><div class="col-lg-8 col-lg-8">
            <a href="{{ url_for('appointments.add_appointment',day=3,week=week,year=year,halfday='Morning',research=research,care_research=care_research)}}" class="btn btn-secondary btn-sm active"
              role="button">New </a>
          </div> </td>
          {% endif %}


          {% if appointments[3][0] %}
          <td class="table-success"> {{appointments[3][0]}} </td>
          {% elif not availabilities[3][0] %}
            <td> </td>
          {% else %}

          <td> <div class="col-lg-8 col-lg-8">
            <a href="{{ url_for('appointments.add_appointment',day=4,week=week,year=year,halfday='Morning',research=research,care_research=care_research)}}" class="btn btn-secondary btn-sm active"
              role="button">New </a>
          </div></td>
          {% endif %}

          {% if appointments[4][0] %}
          <td class="table-success"> {{appointments[4][0]}} </td>
          {% elif not availabilities[4][0] %}
            <td>  </td>
          {% else %}

          <td><div class="col-lg-8 col-lg-8">
            <a href="{{ url_for('appointments.add_appointment',day=5,week=week,year=year,halfday='Morning',research=research,care_research=care_research)}}" class="btn btn-secondary btn-sm active"
              role="button">New </a>
          </div> </td>
          {% endif %}

          {% if appointments[5][0] %}
          <td class="table-success"> {{appointments[5][0]}} </td>
          {% elif not availabilities[5][0] %}
            <td> </td>
          {% else %}

          <td> <div class="col-lg-8 col-lg-8">
            <a href="{{ url_for('appointments.add_appointment',day=6,week=week,year=year,halfday='Morning',research=research,care_research=care_research)}}" class="btn btn-secondary btn-sm active"
              role="button">New </a>
          </div></td>
          {% endif %}

          {% if appointments[6][0] %}
          <td class="table-success"> {{appointments[6][0]}} </td>
          {% elif not availabilities[6][0] %}
            <td> </td>
          {% else %}

          <td><div class="col-lg-8 col-lg-8">
            <a href="{{ url_for('appointments.add_appointment',day=7,week=week,year=year,halfday='Morning',research=research,care_research=care_research)}}" class="btn btn-secondary btn-sm active"
              role="button">New </a>
          </div> </td>
          {% endif %}
      </tr>

      <tr>

          {% if appointments[0][1] %}
          <td class="table-success"> {{appointments[0][1]}} </td>
          {% elif not availabilities[0][1] %}
            <td> </td>
          {% else %}

          <td> <div class="col-lg-8 col-lg-8">
            <a href="{{ url_for('appointments.add_appointment',day=1,week=week,year=year,halfday='Afternoon',research=research,care_research=care_research)}}" class="btn btn-secondary btn-sm active"
              role="button">New </a>
          </div></td>
          {% endif %}

          {% if appointments[1][1] %}
          <td class="table-success"> {{appointments[1][1]}} </td>
          {% elif not availabilities[1][1] %}
            <td> </td>
          {% else %}

          <td><div class="col-lg-8 col-lg-8">
            <a href="{{ url_for('appointments.add_appointment',day=2,week=week,year=year,halfday='Afternoon',research=research,care_research=care_research)}}" class="btn btn-secondary btn-sm active"
              role="button">New </a>
          </div> </td>
          {% endif %}

          {% if appointments[2][1] %}
          <td class="table-success"> {{appointments[2][1]}} </td>
          {% elif not availabilities[2][1] %}
            <td> </td>
          {% else %}

          <td><div class="col-lg-8 col-lg-8">
            <a href="{{ url_for('appointments.add_appointment',day=3,week=week,year=year,halfday='Afternoon',research=research,care_research=care_research)}}" class="btn btn-secondary btn-sm active"
              role="button">New </a>
          </div> </td>
          {% endif %}

          {% if appointments[3][1] %}
          <td class="table-success"> {{appointments[3][1]}} </td>
          {% elif not availabilities[3][1] %}
            <td> </td>
          {% else %}

          <td> <div class="col-lg-8 col-lg-8">
            <a href="{{ url_for('appointments.add_appointment',day=4,week=week,year=year,halfday='Afternoon',research=research,care_research=care_research)}}" class="btn btn-secondary btn-sm active"
              role="button">New </a>
          </div></td>
          {% endif %}

          {% if appointments[4][1] %}
          <td class="table-success"> {{appointments[4][1]}} </td>
          {% elif not availabilities[4][1] %}
            <td>  </td>
          {% else %}

          <td><div class="col-lg-8 col-lg-8">
            <a href="{{ url_for('appointments.add_appointment',day=5,week=week,year=year,halfday='Afternoon',research=research,care_research=care_research)}}" class="btn btn-secondary btn-sm active"
              role="button">New </a>
          </div> </td>
          {% endif %}

          {% if appointments[5][1] %}
          <td class="table-success"> {{appointments[5][1]}} </td>
          {% elif not availabilities[5][1] %}
            <td> </td>
          {% else %}

          <td> <div class="col-lg-8 col-lg-8">
            <a href="{{ url_for('appointments.add_appointment',day=6,week=week,year=year,halfday='Afternoon',research=research,care_research=care_research)}}" class="btn btn-secondary btn-sm active"
              role="button">New </a>
          </div></td>
          {% endif %}

          {% if appointments[6][1] %}
          <td class="table-success"> {{appointments[6][1]}} </td>
          {% elif not availabilities[6][1] %}
            <td> </td>
          {% else %}

          <td><div class="col-lg-8 col-lg-8">
            <a href="{{ url_for('appointments.add_appointment',day=7,week=week,year=year,halfday='Afternoon',research=research,care_research=care_research)}}" class="btn btn-secondary btn-sm active"
              role="button">New </a>
          </div> </td>
          {% endif %}
      </tr>
      </tbody>
    </table>
  </div>
  </div>


</div>

{% endblock%}
